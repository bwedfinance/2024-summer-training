<!DOCTYPE html>
<html lang="en"><head>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-html/tabby.min.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.4.550">

  <meta name="dcterms.date" content="2024-06-25">
  <title>School Finance Equity Training, Summer 2024 - Data Cleaning and Processing in R: Part 1</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../../site_libs/revealjs/dist/theme/quarto.css">
  <link rel="stylesheet" href=".smaller h1 {
  font-size: 0.5em; /* Adjust the font size as needed */
}">
  <link href="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Data Cleaning and Processing in R: Part 1</h1>

<div class="quarto-title-authors">
</div>

  <p class="date">2024-06-25</p>
</section>
<section id="agenda" class="slide level2">
<h2>Agenda</h2>
<ul>
<li>General reminders</li>
<li>Principles of tidy data</li>
<li>Techniques to clean messy data</li>
<li>Break</li>
<li>Joining data sets</li>
<li>Summarizing data</li>
<li>Homework and next class</li>
</ul>
</section>
<section>
<section id="principles-of-tidy-data" class="title-slide slide level1 center">
<h1>Principles of tidy data</h1>

</section>
<section id="cleaning-your-data-one-of-the-most-important-and-under-appreciated-stages-of-good-data-analysis" class="slide level2">
<h2>Cleaning your data: One of the most important and under-appreciated stages of good data analysis</h2>
<ul>
<li><p>Most data rarely come to us in a format that is plug-and-play ready for analysis.</p></li>
<li><p>High-quality data analysis must start with gathering and cleaning relevant data.</p></li>
<li><p>This starts with ensuring that each data frame of raw data you read into R goes through a process of becoming “tidy” — once you have tidy data, merging and visualizing data becomes much easier.</p></li>
<li><p>The process of tidying your data is also helpful for identifying anomalies or outliers in your raw data files.</p></li>
</ul>
<blockquote>
<p><strong>“Tidy data sets are all alike, but every messy data set is messy in its own way.”</strong> - Hadley Wickham</p>
</blockquote>
</section>
<section id="the-principles-of-tidy-data-provide-a-helpful-vision-of-what-good-clean-data-should-look-like" class="slide level2">
<h2>The principles of “tidy data” provide a helpful vision of what good, clean data should look like</h2>
<p>Tidy data follows three rules:</p>
<ol type="1">
<li>Each column is a variable</li>
<li>Each row is an observation</li>
<li>Each cell is a value</li>
</ol>

<img data-src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/08547/images/r4ds/tidy-1.png" class="quarto-figure quarto-figure-center r-stretch" width="3520"><p class="caption">Source: R for Data Science</p></section>
<section id="building-tidy-data-sets-will-bring-consistency-to-your-data-across-scriptsprojects" class="slide level2 smaller">
<h2>Building tidy data sets will bring consistency to your data across scripts/projects</h2>
<p>Tidy data sets also make it easier to work with functions in the <code>tidyverse</code>, which is built to work will with “tidy” data. The package we will focus on today is the <code>tidyr</code> package, which is designed to help you tidy up your messy data into a structured, organized format that is conducive to analysis and visualization. It offers a suite of functions for reshaping and transforming your data, making it easier to work with in downstream analyses.</p>
<p>ADD A PHOTO</p>
</section>
<section id="it-takes-some-work-to-make-data-tidy-including-the-use-of-functions-to-reshape-your-data" class="slide level2 smaller">
<h2>It takes some work to make data tidy, including the use of functions to reshape your data</h2>
<p>Data sets can violate the principles of tidy data in several ways. The most common way is for a variable to be embedded across columns. For example, multiple columns can represent data from different years. In this case, a variable (year) is actually represented by column names instead of being captured in its own “year” column.</p>
<p><strong>Solution:</strong> If your data includes a variable that is embedded across several column names, use the <strong>pivot_longer()</strong> function</p>

<img data-src="https://epirhandbook.com/en/images/pivoting/pivot_longer_new.png" class="r-stretch quarto-figure-center"><p class="caption">Source: R for Data Science</p></section>
<section id="live-coding-example-using-pivot_longer-function" class="slide level2">
<h2>Live coding example: Using <code>pivot_longer()</code> function</h2>
<p>Key arguments of the <code>pivot_longer()</code> function:</p>
<ul>
<li><code>cols</code>: The names of the columns to pivot using tidy-select</li>
<li><code>names_to</code>: The name for the new character column</li>
<li><code>values_to</code>: The name for the new values column</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="co"># clean the special education data -----</span></span>
<span id="cb1-2"><a></a></span>
<span id="cb1-3"><a></a>section_611_longer <span class="ot">&lt;-</span> section_611_raw <span class="sc">|&gt;</span></span>
<span id="cb1-4"><a></a>  <span class="co"># Makes all the letters in a column lowercase</span></span>
<span id="cb1-5"><a></a>  <span class="fu">rename_with</span>(tolower) <span class="sc">|&gt;</span></span>
<span id="cb1-6"><a></a>  <span class="fu">select</span>(state, fy2016, fy2017, fy2018, fy2019, fy2020, fy2021, fy2022) <span class="sc">|&gt;</span></span>
<span id="cb1-7"><a></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"fy"</span>), <span class="co"># The columns start with "fy"</span></span>
<span id="cb1-8"><a></a>               <span class="at">names_to =</span> <span class="st">"fiscal_year"</span>, <span class="co"># the names of the columns will become a value in the "fiscal_year" column</span></span>
<span id="cb1-9"><a></a>               <span class="at">values_to =</span> <span class="st">"idea_funding"</span>) <span class="sc">|&gt;</span> <span class="co"># The values in the "fy" columns will be in the new column "idea_funding"</span></span>
<span id="cb1-10"><a></a>  <span class="co"># Use the gsub to remove the "fy" from the fiscal years so that the values are just the year</span></span>
<span id="cb1-11"><a></a>  <span class="fu">mutate</span>(<span class="at">fiscal_year =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">"^fy"</span>, <span class="st">""</span>, fiscal_year))) <span class="sc">|&gt;</span></span>
<span id="cb1-12"><a></a>  <span class="fu">mutate</span>(<span class="at">idea_category =</span> <span class="st">"Part B, Grants to States"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="it-takes-a-bit-of-work-to-make-data-tidy-including-the-use-of-functions-to-reshape-your-data-cont." class="slide level2 smaller">
<h2>It takes a bit of work to make data tidy, including the use of functions to reshape your data, cont.</h2>
<p>A single observation may be spread across multiple rows: This can happen when one column includes multiple variable types within it. And example would be if a dataframe had a “data_type” column that included entries like “n_tested” and “pct_prof”.</p>
<p><strong>Solution:</strong> If your data includes data from a single observation spread across multiple rows, use the <strong>pivot_wider()</strong> function</p>

<img data-src="https://bcheggeseth.github.io/112_fall_2022/images/pivot_wider.png" class="r-stretch quarto-figure-center"><p class="caption">Source: R for Data Science</p></section>
<section id="live-coding-example-using-pivot_wider-function" class="slide level2 smaller">
<h2>Live coding example: Using <code>pivot_wider()</code> function</h2>
<p>Breaking down the code:</p>
<ul>
<li><code>names_from</code>: The column with values that include multiple variables; will be pivoted into column names.</li>
<li><code>values_from</code>: The column with values will be used as cell values after pivoting.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="co"># Use pivot_wider with the 2023 graduation rate data </span></span>
<span id="cb2-2"><a></a></span>
<span id="cb2-3"><a></a>mn_graduation_fy23_wider <span class="ot">&lt;-</span> mn_graduation_fy23_raw <span class="sc">|&gt;</span></span>
<span id="cb2-4"><a></a>  <span class="co"># Makes all the letters in a column lowercase</span></span>
<span id="cb2-5"><a></a>  <span class="fu">rename_with</span>(tolower) <span class="sc">|&gt;</span></span>
<span id="cb2-6"><a></a>  <span class="co"># rename the columns so there isn't a space in-between the words</span></span>
<span id="cb2-7"><a></a>  <span class="fu">rename</span>(<span class="at">district =</span> <span class="st">"district name"</span>,</span>
<span id="cb2-8"><a></a>         <span class="at">dist_id =</span> <span class="st">"district number"</span>,</span>
<span id="cb2-9"><a></a>         <span class="at">dist_type =</span> <span class="st">"district type"</span>,</span>
<span id="cb2-10"><a></a>         <span class="at">group_category =</span> <span class="st">"group category"</span>,</span>
<span id="cb2-11"><a></a>         <span class="at">student_group =</span> <span class="st">"student group"</span>,</span>
<span id="cb2-12"><a></a>         <span class="at">ending_status =</span> <span class="st">"ending status"</span>,</span>
<span id="cb2-13"><a></a>         <span class="at">four_yr_grad_pct =</span> <span class="st">"four year percent"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-14"><a></a>  <span class="co"># Select the columns we want to include in our dataframe for the pivot_wider</span></span>
<span id="cb2-15"><a></a>  <span class="fu">select</span>(district, dist_id, dist_type, group_category, student_group, ending_status, four_yr_grad_pct) <span class="sc">|&gt;</span></span>
<span id="cb2-16"><a></a>  <span class="co"># filter so that we are only looking at students who graduated in four years</span></span>
<span id="cb2-17"><a></a>  <span class="fu">filter</span>(ending_status <span class="sc">==</span> <span class="st">"Graduate"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-18"><a></a>  <span class="co"># filter the student demographics because we only want to look at race/ethnicity data</span></span>
<span id="cb2-19"><a></a>  <span class="fu">filter</span>(group_category <span class="sc">==</span> <span class="st">"Race/Ethnicity"</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-20"><a></a>  <span class="co"># Pivot_wider! </span></span>
<span id="cb2-21"><a></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="st">"student_group"</span>, <span class="co"># The names of the columns are from the student group column values</span></span>
<span id="cb2-22"><a></a>              <span class="at">values_from =</span> <span class="st">"four_yr_grad_pct"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="techniques-to-clean-messy-data" class="title-slide slide level1 center">
<h1>Techniques to clean messy data</h1>

</section>
<section id="cleaning-data-can-be-challenging-but-its-easier-if-you-take-a-systematic-approach-to-every-raw-data-file" class="slide level2 smaller">
<h2>Cleaning data can be challenging, but it’s easier if you take a systematic approach to every raw data file</h2>
<table>
<colgroup>
<col style="width: 11%">
<col style="width: 88%">
</colgroup>
<thead>
<tr class="header">
<th>Step</th>
<th>Goal</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Data import</td>
<td>Ensure your import function is set up to read the data properly</td>
</tr>
<tr class="even">
<td>Column names</td>
<td><p>Reformat or manually create column names that are:</p>
<ul>
<li><p>lowercase</p></li>
<li><p>use underscores instead of spaces</p></li>
<li><p>do not begin with a number</p></li>
<li><p>follow a consistent format</p></li>
</ul></td>
</tr>
<tr class="odd">
<td>Mis-formatted data</td>
<td>Work with functions from base R like <code>as.numeric()</code> or from the <code>tidyverse</code> packages like <code>stringr</code> to clean the data that appear in a different format than you want.</td>
</tr>
<tr class="even">
<td>Missing data</td>
<td>Identify where in your dataset there are missing variables and/or outliers - this may be more of an iterative process as your explore your data.</td>
</tr>
</tbody>
</table>
</section>
<section id="in-class-coding-example-minnesota-graduation-data" class="slide level2 smaller">
<h2>In-class coding example: Minnesota graduation data</h2>
<p>We can manipulate the district and school data using the following functions:</p>
<ul>
<li><code>tolower()</code>: Converts characters to lowercase. It’s commonly used when dealing with character data, such as strings, to ensure uniformity in text processing and comparisons.</li>
<li><code>str_to_title()</code>: Converts strings to title case. Title case means that the first letter of each word is capitalized, while all other letters are in lowercase.</li>
<li><code>str_replace_all()</code>: Replaces all occurrences of a pattern within a string with a specified replacement.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>mn_graduation_school_fy23_clean <span class="ot">&lt;-</span> mn_graduation_school_fy23_raw <span class="sc">|&gt;</span></span>
<span id="cb3-2"><a></a>  </span>
<span id="cb3-3"><a></a>  <span class="co"># using "tolower" to make all the values in the column lowercase</span></span>
<span id="cb3-4"><a></a>  <span class="fu">mutate</span>(<span class="at">dst_nam =</span> <span class="fu">tolower</span>(dst_nam),</span>
<span id="cb3-5"><a></a>         <span class="at">sch_nam =</span> <span class="fu">tolower</span>(sch_nam)) <span class="sc">|&gt;</span></span>
<span id="cb3-6"><a></a>  </span>
<span id="cb3-7"><a></a>  <span class="co"># using "str_to_title" makes the first letter of each word capitalized</span></span>
<span id="cb3-8"><a></a>  <span class="fu">mutate</span>(<span class="at">dst_nam =</span> <span class="fu">str_to_title</span>(dst_nam),</span>
<span id="cb3-9"><a></a>         <span class="at">sch_nam =</span> <span class="fu">str_to_title</span>(sch_nam)) <span class="sc">|&gt;</span></span>
<span id="cb3-10"><a></a>  </span>
<span id="cb3-11"><a></a>  <span class="co"># using "str_replace_all" turns "Dist" and "Dist."into "District"</span></span>
<span id="cb3-12"><a></a>  <span class="fu">mutate</span>(<span class="at">dst_nam =</span> <span class="fu">str_replace_all</span>(dst_nam, <span class="fu">c</span>(<span class="st">"Dist</span><span class="sc">\\</span><span class="st">b"</span> <span class="ot">=</span> <span class="st">"District"</span>, <span class="st">"Dist</span><span class="sc">\\</span><span class="st">."</span> <span class="ot">=</span> <span class="st">"District"</span>, <span class="st">"District</span><span class="sc">\\</span><span class="st">."</span> <span class="ot">=</span> <span class="st">"District"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="break" class="title-slide slide level1 center">
<h1>Break</h1>

</section>
<section id="your-data-will-rarely-come-in-a-single-table-so-you-will-need-to-use-join-functions-to-merge-the-data-frames" class="slide level2 smaller">
<h2>Your data will rarely come in a single table, so you will need to use join functions to merge the data frames</h2>
<p>To join two data frames, they need to share a common column with a unique identifier.</p>
<p>State departments of education typically assign a unique ID number to each school district. <strong>Make sure this is available in your data sets.</strong></p>
<p>Joining data sets on a name (e.g.&nbsp;school or district) can create problems based on:</p>
<ul>
<li>Capitalization (Mcgregor v. McGregor)</li>
<li>Abbreviation (St.&nbsp;Paul v. Saint Paul)</li>
<li>Mis-spelling (it happens!)</li>
</ul>
</section>
<section id="using-left_join-to-merge-data-sets-will-help-preserve-your-data" class="slide level2 smaller">
<h2>Using <code>left_join()</code> to merge data sets will help preserve your data</h2>
<ul>
<li>Once you have dataframes that share a common ID column, start with your most reliable set of data (typically student count data like ADM or enrollment) and use <code>left_join()</code> to attach additional data to that table.</li>
<li>This approach will preserve your original data, keeping the number of rows (e.g.&nbsp;districts or schools) consistent as you use <code>left_join()</code> to add data by adding more columns.</li>
<li>When a record in the “left” dataframe does not have a match in the “right” dataframe, <code>left_join()</code> will impute a value of <code>NA</code> for all such instances.</li>
</ul>

<img data-src="https://d33wubrfki0l68.cloudfront.net/3abea0b730526c3f053a3838953c35a0ccbe8980/7f29b/diagrams/join-inner.png" class="quarto-figure quarto-figure-center r-stretch"><p class="caption">Source: R for Data Science</p></section>
<section id="coding-example-how-to-use-left_join" class="slide level2">
<h2>Coding example: How to use left_join()</h2>
<ul>
<li><strong>Example 1:</strong> The common ID columns have the same variable names (dist_id)</li>
<li><strong>Example 2:</strong> The common ID columns have different variable names. The il_test_data_fy23_clean dataframe’s variable is dist_id, while the example_2_il_finance_testing_fy23 data frame’s variable name is rcdts. The column names can be different, but the values within the cells must be the same so we can join them.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="co"># Use left_join() function to join the the illinoi data -------</span></span>
<span id="cb4-2"><a></a></span>
<span id="cb4-3"><a></a><span class="co"># EXAMPLE 1: Join them with the same "dist_id" name </span></span>
<span id="cb4-4"><a></a></span>
<span id="cb4-5"><a></a>example_1_il_finance_testing_fy23 <span class="ot">&lt;-</span> il_test_data_fy23_clean <span class="sc">|&gt;</span></span>
<span id="cb4-6"><a></a>  <span class="fu">left_join</span>(il_finance_fy23_same_id, <span class="at">by =</span> <span class="st">"dist_id"</span>)</span>
<span id="cb4-7"><a></a></span>
<span id="cb4-8"><a></a></span>
<span id="cb4-9"><a></a><span class="co"># EXAMPLE 2: Join them with different column names, but they're the same values</span></span>
<span id="cb4-10"><a></a><span class="co"># dist_id comes from because it's in the il_test_data_fy23_clean dataframe </span></span>
<span id="cb4-11"><a></a>example_2_il_finance_testing_fy23 <span class="ot">&lt;-</span> il_test_data_fy23_clean <span class="sc">|&gt;</span></span>
<span id="cb4-12"><a></a>  <span class="fu">left_join</span>(il_finance_fy23_diff_id, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"dist_id"</span> <span class="ot">=</span> <span class="st">"rcdts"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="what-do-you-do-if-you-need-to-create-the-unique-identifier" class="title-slide slide level1 center">
<h1>What do you do if you need to create the unique identifier?</h1>

</section>
<section id="the-identifiers-are-not-always-in-the-same-format.-we-can-use-paste-and-paste0-to-combine-two-columns-to-create-an-identifier" class="slide level2">
<h2>The identifiers are not always in the same format. We can use <code>paste()</code> and <code>paste0()</code> to combine two columns to create an identifier</h2>
<p>in R, <code>paste()</code> and <code>paste0()</code> are both functions that are used to concatenate strings, but they differ in how they handle separators:</p>
<ul>
<li>The <code>paste()</code> function concatenates strings and allows you to specify a separator between the strings using the <code>sep</code> argument. If you do not specify a separator, it defaults to a space (” “).</li>
<li>The <code>paste0()</code> function is a convenience function that concatenates strings without any separator. It is equivalent to using <code>paste(..., sep = "")</code>.</li>
</ul>
</section>
<section id="live-coding-example-minnesota-mca-and-frpl-data" class="slide level2">
<h2>Live coding example: Minnesota MCA and FRPL data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="co"># Create the unique identifier -----</span></span>
<span id="cb5-2"><a></a></span>
<span id="cb5-3"><a></a><span class="co"># Create a unique identifer with paste0</span></span>
<span id="cb5-4"><a></a>mn_mca_frpl_district_fy22_clean <span class="ot">&lt;-</span> mn_mca_frpl_district_fy22 <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a></a>  <span class="co"># This tells us that we want the number to have 4 values </span></span>
<span id="cb5-6"><a></a>  <span class="fu">mutate</span>(<span class="at">dist_number =</span> <span class="fu">str_pad</span>(dist_number, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb5-7"><a></a>         <span class="at">dist_id =</span> <span class="fu">paste0</span>(dist_type, dist_number))</span>
<span id="cb5-8"><a></a></span>
<span id="cb5-9"><a></a><span class="co"># Another way to do this is with paste</span></span>
<span id="cb5-10"><a></a></span>
<span id="cb5-11"><a></a>mn_mca_frpl_district_fy22_other <span class="ot">&lt;-</span> mn_mca_frpl_district_fy22 <span class="sc">|&gt;</span></span>
<span id="cb5-12"><a></a>  <span class="co"># This tells us that we want the number to have 4 values </span></span>
<span id="cb5-13"><a></a>  <span class="fu">mutate</span>(<span class="at">dist_number =</span> <span class="fu">str_pad</span>(dist_number, <span class="at">width =</span> <span class="dv">4</span>, <span class="at">pad =</span> <span class="st">"0"</span>),</span>
<span id="cb5-14"><a></a>         <span class="at">dist_id =</span> <span class="fu">paste</span>(dist_type, dist_number, <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb5-15"><a></a></span>
<span id="cb5-16"><a></a><span class="co"># Join the MCA and FRPL data -----</span></span>
<span id="cb5-17"><a></a></span>
<span id="cb5-18"><a></a><span class="co"># mn_mca_frpl_data &lt;- mn_mca_frpl_district_fy22_clean |&gt;</span></span>
<span id="cb5-19"><a></a><span class="co">#   left_join(mn_frpl_district_clean, by = "dist_id") </span></span>
<span id="cb5-20"><a></a><span class="co"># Once we have shown this example, we will comment this out otherwise we will get </span></span>
<span id="cb5-21"><a></a><span class="co"># en error </span></span>
<span id="cb5-22"><a></a></span>
<span id="cb5-23"><a></a><span class="co"># We have an error because they are incompatible types. The "dist_id" in the </span></span>
<span id="cb5-24"><a></a><span class="co"># "mn_frpl_district_clean" data frame is a number and the "dist_id" variable in the </span></span>
<span id="cb5-25"><a></a><span class="co"># "mn_mca_frpl_district_fy22_clean" is a "character. We can convert either of them, </span></span>
<span id="cb5-26"><a></a><span class="co"># but for this example we will convert the id to a number</span></span>
<span id="cb5-27"><a></a></span>
<span id="cb5-28"><a></a>mn_mca_frpl_join <span class="ot">&lt;-</span> mn_mca_frpl_district_fy22_clean<span class="sc">|&gt;</span></span>
<span id="cb5-29"><a></a>  <span class="fu">mutate</span>(<span class="at">dist_id =</span> <span class="fu">as.numeric</span>(dist_id, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span></span>
<span id="cb5-30"><a></a>  <span class="fu">left_join</span>(mn_frpl_district_clean, <span class="at">by =</span> <span class="st">"dist_id"</span>) </span>
<span id="cb5-31"><a></a></span>
<span id="cb5-32"><a></a><span class="co"># We notice that there are two districts. To rectify this we will remove the </span></span>
<span id="cb5-33"><a></a><span class="co"># extra district from one of the data frames. I will choose to remove the district </span></span>
<span id="cb5-34"><a></a><span class="co"># column in mn_frpl_district_clean because it's uppercase </span></span>
<span id="cb5-35"><a></a></span>
<span id="cb5-36"><a></a>mn_frpl_district_clean <span class="ot">&lt;-</span> mn_frpl_district_clean <span class="sc">|&gt;</span></span>
<span id="cb5-37"><a></a>  <span class="co"># We can use the subtract the sign in front of a column so that it won't be included in the data frame </span></span>
<span id="cb5-38"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>district)</span>
<span id="cb5-39"><a></a></span>
<span id="cb5-40"><a></a><span class="co"># When we join the data frames there will only be one district column </span></span>
<span id="cb5-41"><a></a>mn_mca_frpl_join_no_extra_district <span class="ot">&lt;-</span> mn_mca_frpl_district_fy22_clean<span class="sc">|&gt;</span></span>
<span id="cb5-42"><a></a>  <span class="fu">mutate</span>(<span class="at">dist_id =</span> <span class="fu">as.numeric</span>(dist_id, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> <span class="co"># This mean that anything with an NA is read as 0 </span></span>
<span id="cb5-43"><a></a>  <span class="fu">left_join</span>(mn_frpl_district_clean, <span class="at">by =</span> <span class="st">"dist_id"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-44"><a></a>  <span class="co"># This removes the two columns we no longer want</span></span>
<span id="cb5-45"><a></a>  <span class="fu">select</span>(<span class="sc">-</span>dist_type, <span class="sc">-</span>dist_number) </span>
<span id="cb5-46"><a></a></span>
<span id="cb5-47"><a></a><span class="co"># Clean up the joined data frame ----</span></span>
<span id="cb5-48"><a></a></span>
<span id="cb5-49"><a></a><span class="co"># We notice that there are no charter schools in the FRPL data, so we will drop that </span></span>
<span id="cb5-50"><a></a>mn_mca_frpl_district <span class="ot">&lt;-</span> mn_mca_frpl_join_no_extra_district <span class="sc">|&gt;</span></span>
<span id="cb5-51"><a></a>  <span class="fu">filter</span>(total_enroll <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-52"><a></a>  <span class="co"># we also notice that the counts fo the MCA tests are characters, and not numbers</span></span>
<span id="cb5-53"><a></a>  <span class="co"># so we will convert them into numbers </span></span>
<span id="cb5-54"><a></a>  <span class="fu">mutate</span>(<span class="at">does_not_meet_count =</span> <span class="fu">as.numeric</span>(does_not_meet_count, <span class="at">na.rm =</span> T),</span>
<span id="cb5-55"><a></a>         <span class="at">partially_meets_count =</span> <span class="fu">as.numeric</span>(partially_meets_count, <span class="at">na.rm =</span> T),</span>
<span id="cb5-56"><a></a>         <span class="at">meets_count =</span> <span class="fu">as.numeric</span>(meets_count, <span class="at">na.rm =</span> T),</span>
<span id="cb5-57"><a></a>         <span class="at">exceeds_count =</span> <span class="fu">as.numeric</span>(exceeds_count, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span></span>
<span id="cb5-58"><a></a>  <span class="fu">select</span>(dist_id, district, total_enroll, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="summarizing-data" class="title-slide slide level1 center">
<h1>Summarizing Data</h1>

</section>
<section id="we-can-use-the-group_by-function-to-summarize-data" class="slide level2 smaller">
<h2>We can use the <code>group_by()</code> function to summarize data</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p>The <code>group_by()</code> function is part of the <code>dplyr</code> package. The primary purpose of <code>group_by()</code> is to group a data frame by one or more variables, which allows you to perform operations on subsets of the data independently.</p>
<ul>
<li>Used to define groups of rows based on the values of one or more columns</li>
<li>It is usually followed by summarizing functions like <code>summarize()</code>, <code>mutate()</code>, or other dplyr functions to perform calculations within each group.</li>
<li>It simplifies data analysis tasks by allowing you to focus on grouped subsets of the data.</li>
</ul>
</div><div class="column" style="width:45%;">
<p><img data-src="https://swcarpentry.github.io/r-novice-gapminder/fig/13-dplyr-fig3.png"></p>
</div>
</div>
</section>
<section id="common-functions-for-summarizing-data" class="slide level2 smaller">
<h2>Common functions for summarizing data</h2>
<p>After the <code>group_by()</code> function is used, then there are several different functions we can use with the <code>summarise()</code> function to summarize the data. A few are listed below:</p>
<ul>
<li>The <code>sum()</code> function calculates the sum of the values in each group.<br>
</li>
<li>The <code>first()</code> function returns the first value in each group.</li>
<li>The <code>last()</code> function returns the last value in each group.</li>
<li>The <code>median()</code> function calculates the median of values in each group.</li>
<li>The <code>min()</code> and <code>max()</code> functions minds the minimum and maximum value in each group.</li>
<li>The <code>n()</code> function counts the number of observations in each group.</li>
<li>The <code>n_distinct()</code> function counts the number of distinct values in each group.</li>
</ul>
</section>
<section id="live-coding-example-minnesota-frpl-data" class="slide level2">
<h2>Live Coding Example: Minnesota FRPL Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="co"># Summarize the school data to create a district summary -----</span></span>
<span id="cb6-2"><a></a></span>
<span id="cb6-3"><a></a>mca_frpl_district_summary <span class="ot">&lt;-</span> mca_frpl_school_fy22_clean <span class="sc">|&gt;</span></span>
<span id="cb6-4"><a></a>  <span class="co"># We are going to group the data by the dist_id, which is the unique </span></span>
<span id="cb6-5"><a></a>  <span class="co"># district identifier we created </span></span>
<span id="cb6-6"><a></a>  <span class="fu">group_by</span>(dist_id) <span class="sc">|&gt;</span></span>
<span id="cb6-7"><a></a>  <span class="co"># The "first" indicates to keep the first value. So this will keep the </span></span>
<span id="cb6-8"><a></a>  <span class="co"># identification for district and dist_id</span></span>
<span id="cb6-9"><a></a>  <span class="fu">summarise</span>(<span class="at">dist_id =</span> <span class="fu">first</span>(dist_id), </span>
<span id="cb6-10"><a></a>            <span class="at">district =</span> <span class="fu">first</span>(district),</span>
<span id="cb6-11"><a></a>            <span class="co"># The "sum" totals the values of the columns we are specifying</span></span>
<span id="cb6-12"><a></a>            <span class="at">total_tested =</span> <span class="fu">sum</span>(total_tested, <span class="at">na.rm =</span> T),</span>
<span id="cb6-13"><a></a>            <span class="at">does_not_meet_count =</span> <span class="fu">sum</span>(does_not_meet_count, <span class="at">na.rm =</span>T),</span>
<span id="cb6-14"><a></a>            <span class="at">partially_meets_count =</span> <span class="fu">sum</span>(partially_meets_count, <span class="at">na.rm =</span> T),</span>
<span id="cb6-15"><a></a>            <span class="at">meets_count =</span> <span class="fu">sum</span>(meets_count, <span class="at">na.rm =</span> T),</span>
<span id="cb6-16"><a></a>            <span class="at">exceeds_count =</span> <span class="fu">sum</span>(exceeds_count, <span class="at">na.rm =</span> T))</span>
<span id="cb6-17"><a></a></span>
<span id="cb6-18"><a></a><span class="co"># We can also make a state summary -----</span></span>
<span id="cb6-19"><a></a></span>
<span id="cb6-20"><a></a>mca_frpl_state_summary <span class="ot">&lt;-</span> mca_frpl_district_summary <span class="sc">|&gt;</span></span>
<span id="cb6-21"><a></a>  <span class="co"># We do not need to use group_by() because we are only going to have one value</span></span>
<span id="cb6-22"><a></a>  <span class="fu">summarise</span>(<span class="at">total_tested =</span> <span class="fu">sum</span>(total_tested, <span class="at">na.rm =</span> T),</span>
<span id="cb6-23"><a></a>            <span class="at">does_not_meet_count =</span> <span class="fu">sum</span>(does_not_meet_count, <span class="at">na.rm =</span>T),</span>
<span id="cb6-24"><a></a>            <span class="at">partially_meets_count =</span> <span class="fu">sum</span>(partially_meets_count, <span class="at">na.rm =</span> T),</span>
<span id="cb6-25"><a></a>            <span class="at">meets_count =</span> <span class="fu">sum</span>(meets_count, <span class="at">na.rm =</span> T),</span>
<span id="cb6-26"><a></a>            <span class="at">exceeds_count =</span> <span class="fu">sum</span>(exceeds_count, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span></span>
<span id="cb6-27"><a></a>  <span class="fu">mutate</span>(<span class="at">state =</span> <span class="st">"Minnesota"</span>) <span class="sc">|&gt;</span></span>
<span id="cb6-28"><a></a>  <span class="fu">select</span>(state, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="homework-assignment" class="title-slide slide level1 center">
<h1>Homework assignment</h1>

</section>
<section id="this-weeks-assignment" class="slide level2 smaller">
<h2>This week’s assignment</h2>
<p><strong>Reading assignment</strong></p>
<ul>
<li><a href="https://bellwether.org/wp-content/uploads/2021/10/Bellwether_SplittingBill_05-HowCanSchoolFinStudentswLearnNeeds_Final.pdf"><strong><em>How Can School Finance Systems Support Students with Additional Learning Needs?</em></strong></a></li>
</ul>
<p><strong>Coding task</strong></p>
<p>Clean your state’s district data and make sure that you have all of the data you need to model your state’s funding formula and the potential policy changes you want to make. This may require joining dataframes, <code>pivot_longer()</code>, <code>pivot_wider()</code> and/or using <code>mutate()</code> to merge, reshape, and tidy data from your state.</p>
<p>Ultimately, you’ll want to produce a single dataframe where:</p>
<ul>
<li>Each row represents a single LEA (traditional district or charter school)</li>
<li>Each column represents a single variable</li>
<li>All of the data elements that go into your current formula are present in the dataframe.</li>
</ul>
<p>If you need to join more than two dataframes, <strong>just start with joining two dataframes for this assingment.</strong> We can work on building the full dataset you’ll need to model your formula over the coming weeks.</p>
<p>To get started, a template R script is included: <code>scripts/dist_clean.R</code> – please use that file to load, clean, and save your tidy data.</p>
<p>As always, once you’ve completed the assignment, be sure to commit and push to GitHub!</p>

<div class="quarto-auto-generated-content">
<p><img src="../../images/primary_full-color.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        text: function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>